google.load("search","1",{"nocss" : true});function SloppyGoogle(){var a="";var b=true;this.webResultContainer=$("#contentWeb");this.imageResultContainer=$("#content")}SloppyGoogle.prototype.isFirstTime=function(){return this.firstTime};SloppyGoogle.prototype.enterTheSite=function(){this.firstTime=false};SloppyGoogle.prototype.webSearchComplete=function(d){if(d.results&&d.results.length>0){this.webResultContainer.empty();var c=d.results;for(var b=0;b<c.length;b++){var a=c[b];var e=$('<div class="websearch_div"></div>');e.append('<div class="websearch_title"><a href="'+a.url+'" target="_blank">'+a.title+"</a></div>");e.append('<div class="websearch_content">'+a.content+"</div>");e.hide().delay(Math.random()*3000+200).fadeIn(1000);this.webResultContainer.append(e)}}else{$("#result_doc_container").addClass("hidden");if($("#result_img_container").hasClass("hidden")){$("#content_desc").html("Oops! There is no search results for keyword: <b>"+currentKeywords+"</b>")}}};SloppyGoogle.prototype.imageSearchComplete=function(d){if(d.results&&d.results.length>0){this.imageResultContainer.empty();var c=d.results;for(var b=0;b<c.length;b++){var a=c[b];var f=$('<div class="result_div"></div>');this.imageResultContainer.append(f);f.hide().delay(Math.random()*3000+200).fadeIn(1000);var e=$('<img class="result_img"/>');e.attr("src",a.tbUrl);f.append(e);e[0].onload=this.createWGResultImage;e.wrap('<a href="'+a.url+'" target="_blank"></a>')}}else{$("#result_img_container").addClass("hidden");if($("#result_doc_container").hasClass("hidden")){$("#content_desc").html("Oops! There is no search results for keyword: <b>"+currentKeywords+"</b>")}}};SloppyGoogle.prototype.createWGResultImage=function(){var a=100/this.height*this.width;var b=new WGResultImage(this.parentNode,a,100)};SloppyGoogle.prototype.submitSearch=function(){var a=trim($("#input").val());if(a.length==0){return}else{if(a.length>1){var g=Math.floor(Math.random()*9);var b=[0,0,0,0,1,1,1,1,2];var f=b[g];if(this.isFirstTime()){f=1;this.enterTheSite()}keywords=messedUp(a,f)}}$.ajax({type:"GET",url:"http://api.detourlab.com/search_logs/add.json",data:{search_log:{query:a,messed_query:keywords}},dataType:"json"});$("#img_container").css("width","900px").css("margin-top","10px");$("#img_container img").css("width","150px").css("float","left");$("#main_container").css("padding-left","140px");var d=document.getElementById("content_desc");d.innerHTML="Search Results for: <b>"+keywords+"</b>";currentKeywords=keywords;var j=new google.search.ImageSearch();j.setRestriction(google.search.ImageSearch.RESTRICT_IMAGESIZE,google.search.ImageSearch.IMAGESIZE_MEDIUM);var k=new GsearcherOptions();var e=new GSearchControl();e.setResultSetSize(GSearch.LARGE_RESULTSET);e.addSearcher(j,k);j.setSearchCompleteCallback(this,this.imageSearchComplete,[j]);j.execute('"'+keywords+'"');var h=new google.search.WebSearch();var c=new google.search.SearchControl();c.addSearcher(h);h.setSearchCompleteCallback(this,this.webSearchComplete,[h]);h.execute('"'+keywords+'"');$("#dynamic_textfield")[0].innerHTML="";$("#input").attr("value","")};function messedUp(d,g){var f="";switch(g){case 0:var e,c;e=Math.floor(Math.random()*d.length);if(e<d.length-1){c=e+1}else{if(e>0){c=e-1}}for(var b=0;b<d.length;b++){if(b==e){f+=d[c]}else{if(b==c){f+=d[e]}else{f+=d[b]}}}break;case 1:var a=Math.floor(Math.random()*d.length);for(var b=0;b<d.length;b++){if(b!=a){f+=d[b]}}break;case 2:f=d;break}return trim(f)}function anagram(a){a=a.toLowerCase();aryText=new Array(a.length);len=aryText.length;for(i=0;i<len;i++){aryText[i]=a.charAt(i)}newnumber="";temp="";i=0;for(i=1;i<len;i++){newnumber=(Math.random()*len);newnumber=parseInt(newnumber,10);temp=aryText[i];aryText[i]=aryText[newnumber];aryText[newnumber]=temp}NewName="";NewName=aryText.join("");return NewName}function trim(a){return(a||"").replace(/^\s+|\s+$/g,"")}var styleElement;var canvasElement;var webGraffiti=null;$(document).ready(function(){if($.browser.msie){alert("Current version only works on Chrome, Safari, and Firefox.");return}$("body").removeClass("hidden");if(webGraffiti==null){webGraffiti=new WGGoogle();webGraffiti.init();$("center").fadeIn();var a=new SloppyGoogle();$("#search_form").submit(function(b){b.preventDefault();a.webResultContainer.empty();a.imageResultContainer.empty();if($("#result_doc_container").hasClass("hidden")){$("#result_doc_container").removeClass("hidden")}if($("#result_img_container").hasClass("hidden")){$("#result_img_container").removeClass("hidden")}$("#footnote").hide().delay(6000).fadeIn(1000);a.submitSearch()});$("#input_luck").hover(function(){this.value="Out of Service..."},function(){this.value="I'm Feeling Lucky"}).click(function(b){b.preventDefault()})}});