function WGBorder(d){var a=d.width();b();function b(){var e=document.createElement("canvas");e.height=10;e.width=Math.floor(a)+10;e.style.zIndex=-10;d.append(e);var f=new Processing(e,c)}function c(e){e.setup=function(){e.smooth();e.frameRate(7);e.stroke(33)};e.draw=function(){e.clear();e.drawFreehandLine(5,5,a,5)}}}function WGHyperLink(d){var a=d.width();b();function b(){var e=document.createElement("canvas");e.height=10;e.width=Math.floor(a)+10;e.style.zIndex=-10;e.className="result_canvas";d.append(e);var f=new Processing(e,c)}function c(e){e.setup=function(){e.background(255);e.smooth();e.frameRate(7);e.stroke(33)};e.draw=function(){e.clear();e.drawFreehandLine(5,5,a,5)}}}function WGResultImage(a,g,c){var b=g;var k=c;var m=a;var f=13;var e=13;l();function l(){var h=document.createElement("canvas");h.height=k+20;h.width=b+20;h.style.position="absolute";h.style.left=-10+"px";h.style.top=-10+"px";h.style.zIndex=0;m.appendChild(h);var n=new Processing(h,d)}function d(h){h.setup=function(){h.background(255);h.smooth();h.frameRate(5);h.stroke(33);h.fill(0)};h.draw=function(){h.background(255);h.saveContext();h.globalCompositeOperation("destination-out");h.drawFreehandRect(f,e,b-6,k-6,false);h.restoreContext()}}}function WGTextfield(b,f){var h=300;var g=80;var a=b.offsetWidth;var l=b.offsetHeight;var c=b;var e;var k=false;m();this.isActive=function(){return k};function m(){var n=document.createElement("canvas");n.height=Math.floor(l)+160;n.width=Math.floor(a)+600;n.style.position="absolute";n.style.left=-300+"px";n.style.top=-80+"px";n.style.zIndex=-10;c.appendChild(n);var o=new Processing(n,d)}this.activeYawn=function(n,o){e=new Integrator(n,o);k=true;$("#dynamic_textfield").show();$("div#input_div input").css("opacity",0)};function d(n){n.setup=function(){n.background(255);n.smooth();n.frameRate(10);n.stroke(33);n.fill(255);n.drawFreehandRect(h,g,a,l,false)};n.draw=function(){var w=$("#dynamic_textfield");var o=$("div#input_div input");if(e!=null){if(e.stage==3){o.css("opacity",1);w.hide();n.clear();n.background(255,255,255,0);n.stroke(33);n.noFill();n.drawFreehandRect(h,g,a,l,false);e=null;k=false;var s=$("div#input_div input").val();for(var r=0;r<s.length;r++){var q=$("#dt_"+r);q.css("font-size","18px")}}else{n.clear();n.background(255,255,255,0);e.update();n.fill(255);var t=e.getScaleValue();n.drawFreehandEllipse(n.width/2,n.height/2,t*n.map(e.value,0,1,1,1.05)*a,t*n.map(e.value,0,1,1,3.9)*l,0,2*Math.PI);var s=o.val();var u=0;for(var r=0;r<s.length;r++){var p=18+Math.round(e.value*3*r)+"px";var q=$("#dynamic_textfield span:eq("+r+")");if(q!=undefined){if(q.position()!=null&&q.position().left<220){q.css("font-size",p)}else{if(u==0){q.css("font-size",p);u=r}else{var v=18+Math.round(e.value*3*(u-r+u))+"px";if(q.position().left>480){q.css("font-size",0)}else{q.css("font-size",v)}}}}}}}}}}function WGButtonForYawn(e,c,n,m){var h=10;var g=10;var q=e.width()-7;var o=e.height()+2;var l=0;var k=0;var d=false;var a=e;var p;var b;var v=0;var u=m;var r;var s;var f;t();function t(){a.wrap('<span class="wg_btn_inner"></span>');a.css("position","relative").css("z-index",5);var z=a.parent(".wg_btn_inner");z.css("position","relative");z.wrap('<span class="wg_btn_outer" />');var x=z.parent(".wg_btn_outer");x.css("position","absolute").css("left",c+"px").css("top",n+"px");p=x;f=document.createElement("canvas");f.height=Math.floor(o)*1.3+20;f.width=Math.floor(q)*1.3+20;f.style.position="absolute";f.style.left="-13px";f.style.top="-13px";f.style.zIndex=1;z.append(f);b=p[0];r=parseFloat(b.style.left);s=parseFloat(b.style.top);context=f.getContext("2d");var y=new Processing(f,w)}function w(y){y.setup=function(){y.smooth();y.frameRate(20);y.stroke(33);y.fill(255,255,240);y.drawFreehandRect(h,g,q*1.3,o*1.3,true)};y.draw=function(){if(d){x();y.clear(0,0,y.width,y.height);y.stroke(33);y.fill(255,255,240);y.drawFreehandRect(h,g,q*1.3,o*1.3,true)}};function x(){var B=4;if(l!=0){var A=l>0?parseFloat(b.style.left)+B:parseFloat(b.style.left)-B;b.style.left=A+"px";l=l>0?(l-B):(l+B)}if(k!=0){var z=k>0?parseFloat(b.style.top)+B:parseFloat(b.style.top)-B;b.style.top=z+"px";k=k>0?k-B:k+B}if(Math.abs(l)<=B){l=0}if(Math.abs(k)<=B){k=0}if(l==0&&k==0){d=false}}}this.setTargetPosition=function(y,x){l=y;k=x;d=true};this.resetPosition=function(y,x){this.setTargetPosition(r-parseFloat(b.style.left),s-parseFloat(b.style.top))}}Processing.prototype.drawFreehandLine=function(b,l,a,k){var h=this.dist(b,l,a,k);var d=4;var c=h/d;var n=(a-b)/c;var m=(k-l)/c;this.beginShape();this.vertex(b,l);for(var g=0;g<c;g++){var f=b+n*(g+this.random(2,4));var e=l+m*(g+this.random(-4,4))+this.random(-0.5,0.5);this.vertex(f,e)}this.endShape()};Processing.prototype.drawFreehandEllipse=function(o,m,r,g,b,d){var c=0;var k=Math.floor((r+g)/40);if(k<5){k=5}var u=2*Math.PI/k;var l=new this.ArrayList();for(var f=0;f<k;f++){if(c>=b&&c<=d){var a=new Point(o+Math.cos(c)*r/2*(1+Math.random()*0.1),m+Math.sin(c)*g/2*(1+Math.random()*0.1));l.add(a)}c+=u}if(l.size()>=4){for(var e=0;e<l.size();e++){var t,s,q,n;t=l.get(e);if(e==l.size()-3){s=l.get(e+1);q=l.get(e+2);n=l.get(0)}else{if(e==l.size()-2){s=l.get(e+1);q=l.get(0);n=l.get(1)}else{if(e==l.size()-1){s=l.get(0);q=l.get(1);n=l.get(2)}else{s=l.get(e+1);q=l.get(e+2);n=l.get(e+3)}}}this.fill(255);this.curve(t.x,t.y,s.x,s.y,q.x,q.y,n.x,n.y)}}l=null};Processing.prototype.drawFreehandArc=function(n,m,o,g,b,d){var c=0;var k=Math.floor((o+g)/40);if(k<5){k=40}var q=2*Math.PI/k;var l=new this.ArrayList();for(var f=0;f<k;f++){if(c>=b&&c<=d){var a=new Point(n+Math.cos(c)*o/2*(1+Math.random()*0.1),m+Math.sin(c)*g/2*(1+Math.random()*0.1));l.add(a)}c+=q}this.beginShape();for(var e=0;e<l.size();e++){var a=l.get(e);this.vertex(a.x,a.y)}this.endShape();l=null};Processing.prototype.drawFreehandRect=function(o,l,p,g,e){var n=2;var m=0.15;this.beginShape();this.vertex(o,l);var b=o;var a=l;var k=[];while(b<(o+p)){var d=Math.random()*n;var c=Math.random()>0.5?Math.random():-1*Math.random();b+=d;a+=c*m;this.vertex(b,a);k[0]=new Point(b,a)}while(a<(l+g)){var c=Math.random()*n;var d=Math.random()>0.5?Math.random():-1*Math.random();b+=d*m;a+=c;this.vertex(b,a);k[1]=new Point(b,a)}while(b>o){var d=-1*Math.random()*n;var c=Math.random()>0.5?Math.random():-1*Math.random();b+=d;a+=c*m;this.vertex(b,a);k[2]=new Point(b,a)}while(a>l){var c=-1*Math.random()*n;var d=Math.random()>0.5?Math.random():-1*Math.random();b+=d*m;a+=c;this.vertex(b,a);k[3]=new Point(b,a)}this.endShape(this.CLOSE);if(e){for(var f=0;f<3;f++){this.line(k[f].x,k[f].y,k[f].x+4,k[f].y+3)}}};function Point(a,b){this.x=a;this.y=b}function DIntegrator(m,f,k){var n=m;var a=0;var l=0;var e=0;var g=1;var d=f;var h=k;var c=true;var b;this.set=function(o){n=o};this.getValue=function(){return n};this.getTarget=function(){return b};this.update=function(){if(c){e+=h*(b-n)}l=e/g;a=(a+l)*d;n+=a;e=0};this.setTarget=function(o){c=true;b=o};this.noTarget=function(){c=false}}function Integrator(c,g){this.value=0;this.stage=0;var f=c;var h=0;var b=g;var d=b+Math.round(0.6*b);var a=b+Math.round(0.8*b);this.getScaleValue=function(){return f};this.update=function(){var k=0;switch(this.stage){case 0:this.value=e(h-b,b);h++;if(this.value==1){this.stage=1}break;case 1:h++;if(h==d){this.stage=2}break;case 2:this.value=e(h-d,a);h++;if(this.value<=0){this.stage=3}break}};function e(k,m){var l=-1/Math.pow(m,2)*Math.pow(k,2)+1;return l}}function chunks(a){var e=1/a;var f=new Array(a);f[0]="s";for(var c=0;c<a;c++){f[c]=e}for(var b=0;b<a;b++){var d=f[b]*Math.random()/2;f[b]-=d;if(b==a-1){f[0]+=d}else{f[b+1]+=d}}return f}function removeChildNodes(a){while(a.childNodes[0]){a.removeChild(a.childNodes[0])}}function getElementsByClass(e,g,a){var d=new Array();var c=e.getElementsByTagName(a);var b=c.length;var f=new RegExp(g);for(i=0,j=0;i<b;i++){if(f.test(c[i].className)){d[j]=c[i];j++}}return d}function checkOverlap(f,d,e,b,c){var a;if(f<e){a=e<(f+d-c)}else{a=f<(e+b-c)}return a}function findPosX(a){var b=0;if(a.offsetParent){while(1){b+=a.offsetLeft;if(!a.offsetParent){break}a=a.offsetParent}}else{if(a.x){b+=a.x}}return b}function findPosY(b){var a=0;if(b.offsetParent){while(1){a+=b.offsetTop;if(!b.offsetParent){break}b=b.offsetParent}}else{if(b.y){a+=b.y}}return a};