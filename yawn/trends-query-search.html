<!doctype html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>The Search Operators</title>
		<link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css' />
		<link rel="stylesheet" href="trends.css" type="text/css" media="screen" charset="utf-8" />
		<script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-20216223-4']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>

  <body>
		
		<div style="padding:20px 0px 0 30px;">
			<div id="img_container" style="margin:0px 0 18px 0;">
				<a href="http://search.detourlab.com"><img src="assets/google_logo.png" width="130"></a>
			</div>
			
			<div style="width:220px;text-align:left;float:left;">
				<div style="width:220px;margin:0 40px 30px 0;">
					<div class="label_cate">Hot Languages</div>
					<div id="language_list" >
						<ol>
						</ol>
					</div>
				</div>
				<div style="width:220px;">
					<div class="label_cate">Hot Searches</div>
					<div id="search_list">
						<ol>
						</ol>
					</div>
				</div>
			</div>
			
			<div style="width:20px;height:600px;margin-left:20px; position:absolute; left:220px;" id="hBorder">			
  			<div style="width:900px;position:absolute; left: 30px; line-height:18px;">
  				<div id="keyword" style="font-size:21px;">fcebook</div>
  				<div id="hotness_graph" style='margin:8px 0 4px 0'></div>
  				<div style="margin-top:23px;">Hotness: <span id="hotness_level" style="color:#ff0000;">On Fire</span></div>
  				<div style="margin-top:20px;">[ Related Searches ]</div>
  				<div style="margin-top:5px;width:500px;" id="related_searches"></div>
  				<div style="margin-top:18px;">[ Total Searches ]</div>
  				<div style="margin-top:5px;" id="total_search"></div>
				
  				<div style="width:900px;height:300px;margin-top:20px;float:left;" id="hotnessGraph" />	
  			</div>
			
  			<div style="text-align:center;line-height:23px;display:inline-block;padding-top:24px;">
  				<!-- <div>- About Sloppy Google Trends -</div> -->
  				<div><a href="/">- Sloppy Google (not affiliated with Google Inc)</a></div>
  				<div></div>
  			</div>
  		</div>
	
		</div>
		
		<script type="text/javascript" language="javascript" src="js/jquery.js"></script>
		<script type="text/javascript" language="javascript" src="js/jquery.url.js"></script>
		<script type="text/javascript" language="javascript" src="js/processing-1.0.0.js"></script>
    <script type="text/javascript" language="javascript" src="js/p_base.js"></script>		

		<script type="text/javascript" language="javascript">

			$(document).ready(function() {
				var hotnessINT = 3;
				var hotnessLevel = new WGHotnessLevel( $('#hotness_graph'), hotnessINT );
				
				var border = new WGBorder( $('#hBorder'),0,580 );
				
				var API_URL = "http://dev.detourlab.com:3000";
				var query = jQuery.url.param('query') || '';
				var date = jQuery.url.param('date') || new Date();
				var graph_data = [];
				
				$('#keyword').html(query);
				
				$.ajax({
				  url: API_URL+'/search_logs/trend_query.json?query='+query+'&date='+date,
				  type: 'GET',
				  success: function(data) {
				    $.each(data.hot_languages, function(index, value){
				      $("#language_list ol").append("<li><a class=\"custom_link\" href=\"trends-query-lang.html?query="+value[1]+"&title="+value[2]+"&date="+date+"\">"+value[2]+"</a></li>");
				    });
				    
				    $.each(data.hot_searches, function(index, value){
				      $("#search_list ol").append("<li><a class=\"custom_link\" href=\"trends-query-search.html?query="+value[1]+"&date="+date+"\">"+value[1]+"</a></li>");
				    });
				    
				    $.each(data.query_details.weekly_query_data, function(index, value){
				      graph_data.push([index, value]);
				    });
				    
				    if(graph_data.length > 0) {
    				  var hotnessGraph = new WGHotnessGraph( $('#hotnessGraph'), graph_data );
  				  }
				    
				    $.each(data.query_details.related_searches, function(index, value){
				      var append_text = (data.query_details.related_searches.length == (index+1) ? value : value+', ')
				      $("#related_searches").append(append_text);
				    });
				    
				    $('#total_search').html(data.query_details.total_searches)
				    
				    $('#search_list li,#language_list li').each(function(){
    					$(this).hide().delay(Math.random()*3000+200).fadeIn(1000);
    					var item = new WGHyperLink( $(this) );
    				});
				  }
				});
			});
		</script>
		
	</body>
	
</html>